# RocketMQ

## 一 什么是消息队列

消息中间件一个用于**接收消息**、**存储消息**并**转发消息**的中间件。



## 二 为什么要用消息队列

- 异步处理 - A服务做了什么事情，异步发送一个消息给B/C/D等其它服务。**相比于传统的串行、并行方式，提高了系统吞吐量。**

- 应用解耦 - 系统间通过消息通信，不用调用其他系统进行处理，不用关心其他系统调用。

- 流量削锋 - 有些服务(秒杀)，请求量很高，服务处理不过来，那么请求先放到消息队列里面。**通过消息队列长度控制请求量；可以缓解短时间内的高并发请求。**

- 日志处理 - 解决大量日志传输。

- 消息通讯 - 消息队列一般都内置了高效的通信机制，因此也可以用在纯的消息通讯。比如实现点对点消息队列，或者聊天室等。



### 三 有哪些消息队列？有什么区别？

常见的消息中间件：Kafka、Rocketmq、ActiveMq、RabbitMQ

kafka：
	1、开发语言：     Scala开发
	2、性能、吞吐量： 吞吐量所有MQ里最优秀，QPS十万级、性能毫秒级、支持集群部署
	3、功能：         功能单一
	4、缺点：         丢数据， 因为数据先写入磁盘缓冲区，未直接落盘。机器故障会造成数据丢失
	5、应用场景：     适当丢失数据没有关系、吞吐量要求高、不需要太多的高级功能的场景，比如大数据场景。
RocketMQ：
	1、开发语言：     java开发
	2、性能、吞吐量： 吞吐量高，QPS十万级、性能毫秒级、支持集群部署
	3、功能：         支持各种高级功能，比如说延迟消息、事务消息、消息回溯、死信队列、消息积压等等
	4、缺点：         官方文档相对简单可能是RocketMQ目前唯一的缺点
	5、应用场景：     适当丢失数据没有关系、吞吐量要求高、不需要太多的高级功能的场景，比如大数据场景。RabbitMQ：
	1、开发语言：     Erlang开发
	2、性能、吞吐量： 吞吐量比较低，QPS几万级、性能u秒级、主从架构
	3、功能：         功能单一
	4、缺点：         Erlang小众语言开发，吞吐量低，集群扩展麻烦
	5、应用场景：     中小公司对并发和吞吐量要求不高的场景。



## 四 RocketMQ特点？

经历过双十一，Java实现







## 五 RocketMQ集群模式？









**MQ 的常见问题有：**

1. 消息的顺序问题
2. 消息的重复问题

消息丢失







参考

[消息队列基础](https://juejin.im/post/5dd3ff85e51d453fe34dfcc5)

[消息队列常见问题剖析](https://zhuanlan.zhihu.com/p/93512474)

[RocketMQ学习](https://blog.csdn.net/dingshuo168/article/details/102970988)

